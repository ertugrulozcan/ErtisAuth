@model ErtisAuth.Hub.ViewModels.ErrorViewModel

@{
    ViewData["Title"] = "Error";
}

<div class="post d-flex flex-column-fluid" id="kt_post">
	<div id="kt_content_container" class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <h1 class="text-danger">Error</h1>
                <h2 class="text-danger">An error occurred while processing your request.</h2>
                
                @if (Model.ShowRequestId)
                {
                    <p>
                        <strong>Request ID:</strong> <code>@Model.RequestId</code>
                    </p>
                }
                
                <h3>Development Mode</h3>
                <p>
                    Swapping to <strong>Development</strong> environment will display more detailed information about the error that occurred.
                </p>
                <p>
                    <strong>The Development environment shouldn't be enabled for deployed applications.</strong>
                    It can result in displaying sensitive information from exceptions to end users.
                    For local debugging, enable the <strong>Development</strong> environment by setting the <strong>ASPNETCORE_ENVIRONMENT</strong> environment variable to <strong>Development</strong>
                    and restarting the app.
                </p>        
            </div>
        </div>
        
        @if (Model.Exception?.StackTrace != null)
        {
            <div class="row" style="margin-top: 30px;">
                <div class="col-md-12">
                    <div class="kt-portlet kt-portlet--solid-light kt-portlet--height-fluid">
                        <div class="kt-portlet__head">
                            <div class="kt-portlet__head-label">
                                <span class="kt-portlet__head-icon"><i class="flaticon-stopwatch"></i></span>
                                <h3 class="kt-portlet__head-title">Error Details</h3>
                            </div>
                            <div class="kt-portlet__head-toolbar">
                            
                            </div>
                        </div>
                        <div class="kt-portlet__body">
                            <label><strong>Message</strong></label>
                            <p class="form-control-static">@Model.Exception.Message</p>
    
                            <label><strong>Stack Trace</strong></label>
                            <div class="kt-scroll ps" data-scroll="true" data-height="360" data-scrollbar-shown="true" style="height: 360px; overflow: hidden;">
                                <ul>
                                    @{
                                        var lines = Model.Exception.StackTrace.Split(Environment.NewLine);
                                        @Html.Raw(string.Join(Environment.NewLine, lines.Select(x => $"<li>{x}</li>")))
                                    }
                                </ul>
                                <div class="ps__rail-x" style="left: 0; bottom: 0;">
                                    <div class="ps__thumb-x" tabindex="0" style="left: 0; width: 0;">
                                    </div>
                                </div>
                                <div class="ps__rail-y" style="top: 0; right: 0;">
                                    <div class="ps__thumb-y" tabindex="0" style="top: 0; height: 0;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>   
        }
	</div>
</div>